{% extends 'qr_code/base.html' %}

{% block content %}
<div class="row mb-4">
    <div class="col">
        <h1 class="page-header">Detalhes do Rover</h1>
        <a href="/qr-code/" class="btn btn-outline-primary mb-4">
            <i class="bi bi-arrow-left"></i> Voltar para a lista
        </a>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <div class="card mb-4">
            <div class="card-header bg-light">
                <h5 class="card-title mb-0">Informações do Rover</h5>
            </div>
            <div class="card-body">
                <table class="table table-striped">
                    <tr>
                        <th>ID do Rover:</th>
                        <td>{{ rover.rover_id }}</td>
                    </tr>
                    <tr>
                        <th>ID da Subestação:</th>
                        <td>{{ rover.substation_id }}</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="card">
            <div class="card-header bg-light">
                <h5 class="card-title mb-0">QR Code</h5>
            </div>
            <div class="card-body text-center">
                <img src="data:image/png;base64,{{ rover.qr_code }}" class="img-fluid" alt="QR Code" style="max-width: 250px;">
                <div class="mt-3">
                    <p class="text-muted">Este QR code contém os IDs do rover e da subestação</p>
                    <a href="data:image/png;base64,{{ rover.qr_code }}" download="rover_{{ rover.rover_id }}_qr_code.png" class="btn btn-primary">
                        <i class="bi bi-download"></i> Download QR Code
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col">
        <div class="card">
            <div class="card-header bg-light">
                <h5 class="card-title mb-0">Dados do QR Code</h5>
            </div>
            <div class="card-body">
                <p>O QR Code contém os seguintes dados em formato JSON:</p>
                <pre class="bg-light p-3 rounded">
{
  "rover_id": "{{ rover.rover_id }}",
  "substation_id": "{{ rover.substation_id }}"
}
                </pre>
                <p class="text-muted">Estes dados podem ser lidos por qualquer aplicativo leitor de QR code.</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block script %}
<script>
    // Store CSRF token from the template
    const csrfToken = "{{ csrf_token }}";
    
    // You can add any detail page specific JavaScript here
</script>
{% endblock %}
